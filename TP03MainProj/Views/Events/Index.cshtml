﻿@model IEnumerable<TP03MainProj.Models.Events>

@{
    ViewBag.Title = "Events Calendar";

}




<section>
    <div class="container-fluid bg-white">
        <div class="row justify-content-center text-center section-row m-4">
            <div class="col-12 col-md-8 col-lg-6">
                @{
                    var cultureColour = "";
                    switch (ViewBag.Culture as string)
                    {
                        case "Japanese":
                            cultureColour = "text-warning";
                            break;
                        case "Chinese":
                            cultureColour = "text-danger";
                            break;
                        case "Korean":
                            cultureColour = "text-primary";
                            break;
                        case "Filipino":
                            cultureColour = "text-info";
                            break;
                        case "Vietnamese":
                            cultureColour = "text-success";
                            break;
                        default:
                            cultureColour = "black"; // Default colour
                            break;
                    }
                }
                <div class="display-3 fw-bold">Explore <span class="@cultureColour">@ViewBag.Culture</span> Events!</div>
                <div id="culture" data-culture="@ViewBag.Culture" style="display: none;"></div>
            </div>
        </div>
        <div class="row row-cols-3 justify-content-center m-auto section-row bg-grey border-2 p-2 mt-2 mb-3  border-bottom" id="button-section">
            <div class="col text-center">
                <a class="btn culture-btn btn-primary text-nowrap w-25" href="#events-nav">Events</a>
                <a class="btn culture-btn btn-primary fs-6 w-25" href="#quiz-section">Quiz</a>
                <a class="btn culture-btn btn-primary fs-6 w-25" href="#attract-nav">Attraction</a>
            </div>

        </div>

        <div id="events-nav">
            <br />
            <br />
            <br />
        </div>

        <div class="row justify-content-center section-row mt-5" id="events">
            <div class="col-4">

                <div id="calendar" class="mx-auto"></div>

            </div>
            <div class="col-12 col-md-6">
                <div class="row text-center w-75 h-auto">
                    <h6 style="background-color:powderblue;"><i>Click around the Calendar to find Events for the Festivals above...</i></h6>
                </div>
                <div class="row">
                    <div id="events-list"></div>
                </div>
            </div>
        </div>
        <!-- quiz-->
        <!--<div id="quiz-nav">
            <br />
            <br />
        </div>-->
        <!-- Please add and adjust the CSS according to page (but please keep the messages same as the ones below)-->
        <!-- Put all this into class="container-fluid" of the division for responsive layout -->
        <div class="row justify-content-center section-row bg-warning pt-5 mt-5" id="quiz-section">
            <div class="col-lg-8 col-md-10 text-center">
                <div class="row mb-3">
                    <h2 style="word-spacing: 8px;" class="fw-bold">Common Phrases and Cultural Etiquette Quiz</h2>
                </div>

                <div class="row justify-content-center pb-5 pt-5 ">
                    <h4 id="startMessage">"Want to learn about this culture in depth? Try this quiz!"</h4>
                    <button id="loadQuiz" class="btn btn-primary text-white culture-btn w-25">Learn About @ViewBag.Culture</button>

                    <!-- Score display area, initially hidden -->
                    <div id="scoreDisplay" class="mt-3 mb-3" style="display: none;">
                        <h3>Your Score: <span id="finalScore">0</span></h3>
                    </div>

                    <button id="restartQuiz" class="btn btn-primary text-white culture-btn w-25" style="display: none;">Restart</button>
                </div>


                @*<div id="quizQuestions"></div>*@
                <div id="quizQuestions" class="w-100 ">

                </div>
                <button id="prevQuestion" class="btn btn-primary " style="display: none;">Previous</button>
                <button id="nextQuestion" class="btn btn-primary" style="display: none;">Next</button>


                @*<div id="highScoreDisplay" style="display: none; font-size: 24px; color: green; padding: 10px; border: 1px solid #ccc; text-align: center;">
            High Score: <span id="highScoreValue">0</span>
        </div>*@
            </div>
        </div>



        <!-- Attractions -->
        <div id="attract-nav">
            <br />
            <br />
        </div>
        <div id="attract-section"></div>
    </div>

</section>



@section Scripts {
    <!-- Global Variables for passing data to custom calender script -->
    <script>
        var getCulturalDatesUrl = '@Url.Action("GetCulturalDates", "Events")';
        var getEventsFromEventbriteUrl = '@Url.Action("GetEventsFromEventbrite", "Events")';
    </script>

    <!-- Convert cultureName to lowercase to standardize -->
    <script type="text/javascript">
    var cultureFromViewBag = '@ViewBag.Culture'.toLowerCase();
    </script>

    @Scripts.Render("~/bundles/fullcalendar")
    <script src="~/Scripts/quizLoader.js"></script>





    <!-- Modified the width of the calender to see if it fits -->
    <!-- Add CSS for the quiz section -->

    <style>
        .form-check-label {
            margin-left: 5px;
        }
        .submit-button {
            width:140px;
            height:60px;
        }
        /* General card styling for each question */
        .quiz-img {
            width: 100%;
            height: auto;
        }
        .question.card {
            margin-bottom: 1rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: box-shadow 0.3s ease-in-out;
        }

            .question.card:hover {
                box-shadow: 0 8px 16px rgba(0,0,0,0.2);
            }

        /* Header of each question */
        .card-header {
            background-color: #007bff; /* Primary color */
            color: white;
            font-size: 1.25rem;
        }

        /* Image styling */
        .card-img-top {
            width: 20%; /* Ensures the image takes up the entire card width */
            height: auto; /* Maintain aspect ratio */
            border-bottom: 1px solid #dee2e6; /* A subtle border under the image */
        }

        /* Styling for the body of the card where options are located */
        .card-body {
            padding: 1rem;
        }

        /* List group item styling - clickable options */
        .list-group-item {
            display: flex; /* Makes the label a flex container */
            justify-content: center; /* Center horizontally */
            align-items: center; /* Center vertically */
            cursor: pointer;
            transition: background-color 0.2s ease-in-out;
            height: 50px; /* Fixed height as specified */
            width: auto; /* Width adjusts to content or container */
        }


        .list-group-item-action:hover {
            background-color: #007bff;
            color:white;/* Light grey on hover for feedback */
        }

        /* Success and danger styles for correct/incorrect answers */
        .list-group-item-success {
            background-color: #28a745; /* Bootstrap success green */
            color: white;
        }

        .list-group-item-danger {
            background-color: #dc3545; /* Bootstrap danger red */
            color: white;
        }

        /* Button styling for invisible radio buttons */
        .btn-check:checked + .btn-secondary {
            background-color: #007bff; /* Match the primary color when selected */
            color: white;
        }

        /* Navigation buttons styling */
        .btn-primary {
            background-color: #007bff; /* Primary blue */
            border-color: #007bff;
            color: white;
        }

            .btn-primary:hover {
                background-color: #0056b3; /* Darker blue on hover */
                border-color: #0056b3;
            }


        #prevQuestion, #nextQuestion {
            margin: 10px;
            padding: 5px 20px;
            font-size: 16px;
            width: 10vh;
            height: 3vh;
        }

        #quizFrame {
            height: 1000px;
        }

        .culture-btn {
            min-height: 40px;
            height: 40px;
        }
        .event-detail {
            margin-bottom: 20px;
            padding: 10px;
            border: 3px solid @cultureColour;
            border-radius: 5px;
        }

            .event-detail h3 {
                margin-top: 0;
            }

        .fc-day:hover {
            background-color: #eee;
            cursor: pointer;
        }

        .highlighted {
            background-color: #ff0;
            border: 2px solid #f00;
        }

        .correct-answer {
            background-color: green;
            color: white;
        }

        .wrong-answer {
            background-color: red;
            color: white;
        }
    </style>
}