﻿@model IEnumerable<TP03MainProj.Models.Events>

@{
    ViewBag.Title = "Events Calendar";

}




<section>
    <div class="container-fluid bg-white">
        <div class="row justify-content-center text-center section-row m-4">
            <div class="col-12 col-md-8 col-lg-6 mt-3">
                @{
                    var cultureColour = "";
                    switch (ViewBag.Culture as string)
                    {
                        case "Japanese":
                            cultureColour = "text-warning";
                            break;
                        case "Chinese":
                            cultureColour = "text-danger";
                            break;
                        case "Korean":
                            cultureColour = "text-primary";
                            break;
                        case "Filipino":
                            cultureColour = "text-info";
                            break;
                        case "Vietnamese":
                            cultureColour = "text-success";
                            break;
                        default:
                            cultureColour = "black"; // Default colour
                            break;
                    }
                }
                <div class="display-3 fw-bold">Explore <span class="@cultureColour">@ViewBag.Culture</span> Events!</div>
                <div id="culture" data-culture="@ViewBag.Culture" style="display: none;"></div>
            </div>
        </div>
        <div class="row row-cols-3 justify-content-center m-auto section-row shadow p-2 bg-body rounded mt-2 mb-3  border-bottom" id="button-section">
            <div class="col text-center">
                <a class="btn culture-btn btn-primary mb-2 text-nowrap " href="#events-nav">Events</a>
                <a class="btn culture-btn btn-primary mb-2 fs-6 " href="#quiz-section">Quiz</a>
                <a class="btn culture-btn btn-primary mb-2 fs-6 " href="#attract-section">Attraction</a>
            </div>

        </div>

        <div id="events-nav" class="">

        </div>

        <div class="row justify-content-center section-row mt-5" id="events">
            <!-- Responsive Calendar Column -->
            <div class="col-xs-12 col-sm-10 col-md-8 col-lg-6 shadow-lg p-lg-5 rounded-5 border" style="background: #F5F5DC">
                <div id="calendar" class="mx-auto  "></div>
            </div>
            <div class="col-xs-12 col-sm-10 col-md-8 col-lg-6">
                <div class="row text-center w-100 h-auto m-2 mt-2 mb-2">
                    <h6 class="bg-info rounded shadow p-1"><i>Click around the Calendar to find Events for the Festivals above...</i></h6>
                </div>
                <div class="row">
                    <div id="events-list"></div>
                </div>
            </div>
        </div>

        <div class="row justify-content-center section-row shadow-lg rounded-5 bg-body pt-5 mb-5 mt-5" id="quiz-section" style="">
            <div class="col-lg-8 col-md-10 text-center">
                <div class="row mb-3">
                    <h2 style="word-spacing: 2px;" class="fw-bold display-3">Common Phrases and Cultural Etiquette Quiz</h2>
                    <h4 id="startMessage">"Want to learn about this culture in depth? Try this quiz!"</h4>
                </div>

                <div class="row justify-content-center pb-5 pt-5">
                    <button id="loadQuiz" class="btn btn-primary text-white culture-btn w-auto px-2 px-sm-3 px-md-4">
                        <span class="d-block d-sm-inline text-nowrap small-text">Learn About @ViewBag.Culture</span>
                    </button>
                    <!-- Score display area, initially hidden -->
                    <div id="scoreDisplay" class="mt-3 mb-3" style="display: none;">
                        <h3>Your Score: <span id="finalScore">0</span></h3>
                    </div>

                    <button id="restartQuiz" class="btn btn-primary text-white culture-btn w-25" style="display: none;">Restart</button>
                </div>

                <div class="mb-5" id="quizQuestions">
                    <!-- Progress bar -->
                    <div class="progress mb-3 m-auto " id="progress_area" style="display: none; width: 95%;">
                        <div id="quizProgress" class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%; ">Question 0 of 0</div>
                    </div>
                    <!-- Questions content -->
                    <div id="quizContent" class="w-100 mb-2"></div>
                    <button id="prevQuestion" class="btn btn-primary text-white culture-btn w-25 px-2 px-sm-3 px-md-4" style="display: none;">Previous</button>
                    <button id="nextQuestion" class="btn btn-primary text-white culture-btn w-25 px-2 px-sm-3 px-md-4" style="display: none;">Next</button>
                </div>
                @*<audio id="cheerSound" src="path/to/cheer.mp3" preload="auto"></audio>*@

                <!-- 喝彩动画 -->
                <!--<div id="cheerAnimation" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 9999;">
                    <div class="cheer" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: url('@Url.Content("~/Content/Images/Quiz/cheer1.gif")') repeat; background-size: cover; background-position: center;"></div>
                </div>-->

            </div>
        </div>








        <div class="row h-100 mt-3 mb-3 p-3" id="attract-section">
            <div class="container">
                <!-- Section Title -->
                <div class="row text-center mb-3">
                    <div class="col">
                        <h1 class="display-2 fw-bold">Attraction</h1>
                    </div>
                </div>

                <!-- Content Rows for Monuments and Restaurants -->
                @{
                    switch (ViewBag.Culture as string)
                    {
                        case "Japanese":
                            @Html.Partial("~/Views/Events/Attractions/Japanese.cshtml")
                            break;
                        case "Chinese":
                            @Html.Partial("~/Views/Events/Attractions/Chinese.cshtml")
                            break;
                        case "Korean":
                            @Html.Partial("~/Views/Events/Attractions/Korean.cshtml")
                            break;
                        case "Filipino":
                            @Html.Partial("~/Views/Events/Attractions/Filipino.cshtml")
                            break;
                        case "Vietnamese":
                            @Html.Partial("~/Views/Events/Attractions/Vietnamese.cshtml")
                            break;
                        default:
                            cultureColour = "black"; // Default colour
                            break;
                    }
                }

            </div>
        </div>



    </div>

</section>



@section Scripts {
    <!-- Global Variables for passing data to custom calender script -->
    <script>
        var getCulturalDatesUrl = '@Url.Action("GetCulturalDates", "Events")';
        var getEventsFromEventbriteUrl = '@Url.Action("GetEventsFromEventbrite", "Events")';
    </script>

    <!-- Convert cultureName to lowercase to standardize -->
    <script type="text/javascript">
    var cultureFromViewBag = '@ViewBag.Culture'.toLowerCase();
    </script>

    @Scripts.Render("~/bundles/fullcalendar")
    <script src="~/Scripts/quizLoader.js"></script>

    @Styles.Render("~/bundles/quizstyle")




    <!-- Modified the width of the calender to see if it fits -->
    <!-- Add CSS for the quiz section -->

    <style>
        .event-detail {
    margin-bottom: 20px;
    padding: 10px;
    border: 3px solid @cultureColour;
    border-radius: 5px;
}
    </style>
}